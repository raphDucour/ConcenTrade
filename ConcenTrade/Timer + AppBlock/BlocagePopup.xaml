<?xml version="1.0" encoding="utf-8"?>
<Window x:Class="Concentrade.BlocagePopup"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Concentrade"
        Title="Application bloquée"
        Height="400" 
        Width="500"
        WindowStartupLocation="CenterScreen"
        Background="Transparent"
        WindowStyle="None"
        AllowsTransparency="True"
        ResizeMode="NoResize"
        Topmost="True">
    <Border Background="#1C1C1E" CornerRadius="15" Padding="20" BorderBrush="#00E0FF" BorderThickness="2">
        <Grid>
            <StackPanel>
                <!-- En-tête -->
                <TextBlock x:Name="MessageText" Text="Cette application est bloquée" 
                          Foreground="White" FontSize="18" TextAlignment="Center" Margin="0,0,0,10"/>
                
                <!-- Option "Toujours autoriser" -->
                <Border Background="#232323" CornerRadius="10" Padding="15" Margin="0,10">
                    <StackPanel>
                        <CheckBox x:Name="AlwaysAllowCheckbox" 
                                 Content="Autoriser temporairement cette application"
                                 Foreground="White"
                                 Margin="0,0,0,10"/>
                        
                        <!-- Sélection du temps (visible uniquement si la checkbox est cochée) -->
                        <Grid x:Name="TimeSelectionGrid" Visibility="Collapsed">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <ComboBox x:Name="TimeSelection" Grid.Column="0" Margin="0,0,10,0"
                                      Background="#232323" Foreground="White">
                                <ComboBox.Style>
                                    <Style TargetType="ComboBox">
                                        <Setter Property="Foreground" Value="White"/>
                                        <Setter Property="Background" Value="#232323"/>
                                        <Setter Property="BorderBrush" Value="#232323"/>
                                        <Setter Property="BorderThickness" Value="1"/>
                                    </Style>
                                </ComboBox.Style>
                                <ComboBox.ItemContainerStyle>
                                    <Style TargetType="ComboBoxItem">
                                        <Setter Property="Foreground" Value="White"/>
                                        <Setter Property="Background" Value="#232323"/>
                                        <Setter Property="FontSize" Value="16"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="Background" Value="#00E0FF"/>
                                                <Setter Property="Foreground" Value="#232323"/>
                                            </Trigger>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="#444"/>
                                                <Setter Property="Foreground" Value="White"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </ComboBox.ItemContainerStyle>
                                <ComboBoxItem Content="1 minute"/>
                                <ComboBoxItem Content="2 minutes"/>
                                <ComboBoxItem Content="3 minutes"/>
                                <ComboBoxItem Content="4 minutes"/>
                                <ComboBoxItem Content="5 minutes"/>
                                <ComboBoxItem Content="6 minutes"/>
                                <ComboBoxItem Content="7 minutes"/>
                                <ComboBoxItem Content="8 minutes"/>
                                <ComboBoxItem Content="9 minutes"/>
                                <ComboBoxItem Content="10 minutes"/>
                            </ComboBox>
                            
                            <TextBlock Grid.Column="1" 
                                     Text="Le timer sera mis en pause"
                                     Foreground="#8FA3B0"
                                     VerticalAlignment="Center"/>
                        </Grid>
                    </StackPanel>
                </Border>
            </StackPanel>
            <!-- Boutons -->
            <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,0,0,10">
                <Button x:Name="ContinueButton"
                        Content="Continuer quand même" 
                        Click="Continue_Click"
                        Margin="0,0,0,10" Padding="15,8" Width="220" 
                        Background="#444" Foreground="White">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="20"/>
                        </Style>
                    </Button.Resources>
                </Button>
                <Button x:Name="CloseButton"
                        Content="Fermer l'application" 
                        Click="CloseApp_Click"
                        Padding="15,8" Width="220"
                        Style="{StaticResource DestructiveButton}"
                        HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>
