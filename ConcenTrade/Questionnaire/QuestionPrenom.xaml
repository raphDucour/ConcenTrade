<Page x:Class="Concentrade.QuestionPrenom"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      KeyDown="Page_KeyDown"
      FocusManager.FocusedElement="{Binding RelativeSource={RelativeSource Self}}">

    <!-- Fond dégradé doux -->
    <Page.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#0F2027" Offset="0.0"/>
            <GradientStop Color="#203A43" Offset="0.5"/>
            <GradientStop Color="#2C5364" Offset="1.0"/>
        </LinearGradientBrush>
    </Page.Background>

    <!-- Animation douce : montée + fade -->
    <Page.Triggers>
        <EventTrigger RoutedEvent="Page.Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="MainPanel"
                                     Storyboard.TargetProperty="Opacity"
                                     From="0" To="1"
                                     Duration="0:0:1"
                                     AccelerationRatio="0.4"/>
                    <DoubleAnimation Storyboard.TargetName="MainPanel"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                                     From="30" To="0"
                                     Duration="0:0:1"
                                     AccelerationRatio="0.4"/>
                    <DoubleAnimation Storyboard.TargetName="BreathPanel"
                                     Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Opacity)"
                                     From="0.25" To="0.45" Duration="0:0:2.5" AutoReverse="True" RepeatBehavior="Forever"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Page.Triggers>

    <Page.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontSize" Value="40"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,0,0,30"/>
        </Style>

        <Style TargetType="TextBox">
            <Setter Property="Width" Value="400"/>
            <Setter Property="Height" Value="55"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="#181C20"/>
            <Setter Property="BorderBrush" Value="#00D9A6"/>
            <Setter Property="BorderThickness" Value="1.5"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10">
                            <ScrollViewer x:Name="PART_ContentHost"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsKeyboardFocused" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#33FFE6"/>
                                <Setter TargetName="border" Property="BorderThickness" Value="2.5"/>
                                <Setter TargetName="border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect BlurRadius="10" ShadowDepth="0" Color="#33FFE6" Opacity="0.6"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsKeyboardFocused" Value="False">
                                <Setter TargetName="border" Property="Effect" Value="{x:Null}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="Button">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="Width" Value="160"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="Background" Value="#00D9A6"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Margin" Value="0,40,0,0"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="10">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Background" Value="#558A8A8A"/>
                                <Setter Property="Foreground" Value="#FFEEEEEE"/>
                                <Setter Property="Cursor" Value="Arrow"/>
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsMouseOver" Value="True"/>
                                    <Condition Property="IsEnabled" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter TargetName="border" Property="Background" Value="#19FCD6"/>
                                <Setter TargetName="border" Property="RenderTransform">
                                    <Setter.Value>
                                        <TranslateTransform Y="-3"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect BlurRadius="12" ShadowDepth="0" Color="#00D9A6" Opacity="0.18"/>
                                    </Setter.Value>
                                </Setter>
                            </MultiTrigger>
                            <Trigger Property="IsMouseOver" Value="False">
                                <Setter TargetName="border" Property="RenderTransform">
                                    <Setter.Value>
                                        <TranslateTransform Y="0"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="border" Property="Effect" Value="{x:Null}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Page.Resources>

    <Grid Background="{StaticResource ZenBackgroundBrush}">
        <Canvas x:Name="ParticleCanvas" Background="Transparent"/>
        <Border
            x:Name="BreathPanel"
            Background="#40FFFFFF"
            CornerRadius="30"
            BorderBrush="#80FFFFFF"
            BorderThickness="1.5"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Padding="40">
            <StackPanel x:Name="MainPanel" VerticalAlignment="Center" HorizontalAlignment="Center"
                        Opacity="0">
                <StackPanel.RenderTransform>
                    <TranslateTransform Y="30"/>
                </StackPanel.RenderTransform>

                <TextBlock Text="Quel est ton prénom ?" TextWrapping="Wrap"/>
                <TextBlock Text="Commençons par faire connaissance." FontSize="18" Foreground="#CCFFFFFF" Margin="0,0,0,20" TextAlignment="Center"/>
                <TextBox x:Name="NameInput" Loaded="NameInput_Loaded"/>
                <Button x:Name="SuivantButton" Content="Suivant" Click="Suivant_Click"/>
            </StackPanel>
        </Border>
    </Grid>
</Page>