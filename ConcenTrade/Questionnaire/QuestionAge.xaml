<Page x:Class="Concentrade.QuestionAge"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      KeyDown="Page_KeyDown"
      FocusManager.FocusedElement="{Binding RelativeSource={RelativeSource Self}}">

    <!-- Fond dégradé doux -->
    <Page.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#0F2027" Offset="0.0"/>
            <GradientStop Color="#203A43" Offset="0.5"/>
            <GradientStop Color="#2C5364" Offset="1.0"/>
        </LinearGradientBrush>
    </Page.Background>

    <!-- Animation douce : montée + fade -->
    <Page.Triggers>
        <EventTrigger RoutedEvent="Page.Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="MainPanel"
                                     Storyboard.TargetProperty="Opacity"
                                     From="0" To="1"
                                     Duration="0:0:1"
                                     AccelerationRatio="0.4"/>
                    <DoubleAnimation Storyboard.TargetName="MainPanel"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                                     From="30" To="0"
                                     Duration="0:0:1"
                                     AccelerationRatio="0.4"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Page.Triggers>

    <Page.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontSize" Value="40"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,0,0,30"/>
        </Style>

        <Style TargetType="TextBox">
            <Setter Property="Width" Value="400"/>
            <Setter Property="Height" Value="55"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="#1E2A38"/>
            <Setter Property="BorderBrush" Value="#3A4B5C"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
        </Style>

        <Style TargetType="Button">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="Width" Value="160"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="Background" Value="#00D9A6"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Margin" Value="0,40,0,0"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
        </Style>
    </Page.Resources>

    <Grid>
        <StackPanel x:Name="MainPanel" VerticalAlignment="Center" HorizontalAlignment="Center"
                    Opacity="0">
            <StackPanel.RenderTransform>
                <TranslateTransform Y="30"/>
            </StackPanel.RenderTransform>

            <TextBlock Text="Quelle est ta date de naissance ?" TextWrapping="Wrap"/>
            <TextBlock Text="Format : JJ/MM/AAAA" FontSize="20" Margin="0,0,0,10" Opacity="0.7"/>
            <TextBox x:Name="DateNaissanceInput" 
                    MaxLength="10"
                    PreviewTextInput="DateNaissance_PreviewTextInput"
                    TextChanged="DateNaissance_TextChanged"
                    Loaded="AgeInput_Loaded">
                <TextBox.Resources>
                    <Style TargetType="TextBox" BasedOn="{StaticResource {x:Type TextBox}}">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="TextBox">
                                    <Border Background="{TemplateBinding Background}"
                                            BorderBrush="{TemplateBinding BorderBrush}"
                                            BorderThickness="{TemplateBinding BorderThickness}"
                                            CornerRadius="5">
                                        <ScrollViewer x:Name="PART_ContentHost"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </TextBox.Resources>
            </TextBox>
            <TextBlock x:Name="ErrorMessage" 
                      Text="Format invalide. Utilisez JJ/MM/AAAA" 
                      FontSize="16" 
                      Foreground="#FFE6E6" 
                      Margin="0,5,0,0" 
                      Visibility="Collapsed"/>
            <Button x:Name="SuivantButton" Content="Suivant" Click="Suivant_Click"/>

        </StackPanel>
    </Grid>
</Page>